<div *ngIf="loading">Loading...</div>
<div *ngIf="error">{{ error }}</div>
<ng-container *ngIf="!loading && !error && report">
  <h2>Rekap Nilai Siswa per Kelas</h2>
  <div *ngFor="let c of report.courses">
    <h3>Kelas: {{ c.course }}</h3>
    <table mat-table [dataSource]="c.students" class="mat-elevation-z8">
      <ng-container matColumnDef="student">
        <th mat-header-cell *matHeaderCellDef>Siswa</th>
        <td mat-cell *matCellDef="let s">{{ s.student }}</td>
      </ng-container>
      <ng-container matColumnDef="assignment_avg">
        <th mat-header-cell *matHeaderCellDef>Rata-rata Assignment</th>
        <td mat-cell *matCellDef="let s">{{ s.assignment_avg | number:'1.2-2' }}</td>
      </ng-container>
      <ng-container matColumnDef="quiz_avg">
        <th mat-header-cell *matHeaderCellDef>Rata-rata Quiz</th>
        <td mat-cell *matCellDef="let s">{{ s.quiz_avg | number:'1.2-2' }}</td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="['student','assignment_avg','quiz_avg']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['student','assignment_avg','quiz_avg'];"></tr>
    </table>
  </div>
</ng-container> 